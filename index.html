<!doctype html>
<html>
  <head>
    <title>Test Chat</title>
    <script src="https://cdn.socket.io/socket.io-1.2.0.js"></script>
    <script src="http://code.jquery.com/jquery-1.11.1.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"> </script>
    <link rel="stylesheet" href='index.css'/>
  </head>
  <body>
    <div id="message-container">
      <ul id="messages"></ul>
      <form id="typebar" action="">
        <input id="m" autocomplete="off" /><button>Send</button>
      </form>
      <script>
        var socket = io();
        $('form').submit(function(){
          socket.emit('chat message', $('#m').val());
          $('#m').val('');
          return false;
        });
        socket.on('pageload', function(data){
          var userName = prompt("Please enter your name:");
          socket.emit("username", userName);
          for(var i = 0; i<data.length; i++){
            $('#messages').append("<li>" + data[i] + "</li>");
          }
        });
        socket.on('chat message', function(obj){
          $('#messages').append("<li>" + obj.id + ": " + obj.message + "</li>");
      });
        socket.on('hannah', function(obj) {
            $('#messages').append("<li>" + obj.id + ": " + "<img src='http://33.media.tumblr.com/26bf203475c4f4350c6d837da9e25a3f/tumblr_mucnehOqeX1rby04wo1_1280.gif' /></li><br><br>");
        });
        socket.on('reenu', function(obj) {
            $('#messages').append("<li>" + obj.id + ": " + "<img src='http://media.giphy.com/media/PFXmxJoyTNfDG/giphy.gif' /></li><br><br>");
        });
        socket.on('shrug', function(obj) {
          $('#messages').append("<li>" + obj.id + ": " + "<img src='http://media.giphy.com/media/y65VoOlimZaus/giphy.gif' /></li><br><br>");
        });
        socket.on('numusers', function(obj) {
          $('#messages').append("<li>OP: " + obj.count);
        });
        socket.on('erase chat', function(message){
          $('#messages').empty();
        });
      </script>
    </div>
  </body>
</html>
